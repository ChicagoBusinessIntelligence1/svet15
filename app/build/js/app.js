define("famous/core/Entity",["require","exports","module"],function(a,b,c){function d(a){return h[a]}function e(a,b){h[a]=b}function f(a){var b=h.length;return e(b,a),b}function g(a){e(a,null)}var h=[];c.exports={register:f,unregister:g,get:d,set:e}}),define("famous/core/Transform",["require","exports","module"],function(a,b,c){function d(a){return 2===a.length?a[0]*a[0]+a[1]*a[1]:a[0]*a[0]+a[1]*a[1]+a[2]*a[2]}function e(a){return Math.sqrt(d(a))}function f(a){return 0>a?-1:1}var g={};g.precision=1e-6,g.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g.multiply4x4=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]},g.multiply=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2],a[1]*b[0]+a[5]*b[1]+a[9]*b[2],a[2]*b[0]+a[6]*b[1]+a[10]*b[2],0,a[0]*b[4]+a[4]*b[5]+a[8]*b[6],a[1]*b[4]+a[5]*b[5]+a[9]*b[6],a[2]*b[4]+a[6]*b[5]+a[10]*b[6],0,a[0]*b[8]+a[4]*b[9]+a[8]*b[10],a[1]*b[8]+a[5]*b[9]+a[9]*b[10],a[2]*b[8]+a[6]*b[9]+a[10]*b[10],0,a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14],1]},g.thenMove=function(a,b){return b[2]||(b[2]=0),[a[0],a[1],a[2],0,a[4],a[5],a[6],0,a[8],a[9],a[10],0,a[12]+b[0],a[13]+b[1],a[14]+b[2],1]},g.moveThen=function(a,b){a[2]||(a[2]=0);var c=a[0]*b[0]+a[1]*b[4]+a[2]*b[8],d=a[0]*b[1]+a[1]*b[5]+a[2]*b[9],e=a[0]*b[2]+a[1]*b[6]+a[2]*b[10];return g.thenMove(b,[c,d,e])},g.translate=function(a,b,c){return void 0===c&&(c=0),[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]},g.thenScale=function(a,b){return[b[0]*a[0],b[1]*a[1],b[2]*a[2],0,b[0]*a[4],b[1]*a[5],b[2]*a[6],0,b[0]*a[8],b[1]*a[9],b[2]*a[10],0,b[0]*a[12],b[1]*a[13],b[2]*a[14],1]},g.scale=function(a,b,c){return void 0===c&&(c=1),void 0===b&&(b=a),[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]},g.rotateX=function(a){var b=Math.cos(a),c=Math.sin(a);return[1,0,0,0,0,b,c,0,0,-c,b,0,0,0,0,1]},g.rotateY=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,0,-c,0,0,1,0,0,c,0,b,0,0,0,0,1]},g.rotateZ=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,c,0,0,-c,b,0,0,0,0,1,0,0,0,0,1]},g.rotate=function(a,b,c){var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b),h=Math.cos(c),i=Math.sin(c),j=[f*h,d*i+e*g*h,e*i-d*g*h,0,-f*i,d*h-e*g*i,e*h+d*g*i,0,g,-e*f,d*f,0,0,0,0,1];return j},g.rotateAxis=function(a,b){var c=Math.sin(b),d=Math.cos(b),e=1-d,f=a[0]*a[0]*e,g=a[0]*a[1]*e,h=a[0]*a[2]*e,i=a[1]*a[1]*e,j=a[1]*a[2]*e,k=a[2]*a[2]*e,l=a[0]*c,m=a[1]*c,n=a[2]*c,o=[f+d,g+n,h-m,0,g-n,i+d,j+l,0,h+m,j-l,k+d,0,0,0,0,1];return o},g.aboutOrigin=function(a,b){var c=a[0]-(a[0]*b[0]+a[1]*b[4]+a[2]*b[8]),d=a[1]-(a[0]*b[1]+a[1]*b[5]+a[2]*b[9]),e=a[2]-(a[0]*b[2]+a[1]*b[6]+a[2]*b[10]);return g.thenMove(b,[c,d,e])},g.skew=function(a,b,c){return[1,Math.tan(b),0,0,Math.tan(c),1,0,0,0,Math.tan(a),1,0,0,0,0,1]},g.skewX=function(a){return[1,0,0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1]},g.skewY=function(a){return[1,Math.tan(a),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},g.perspective=function(a){return[1,0,0,0,0,1,0,0,0,0,1,-1/a,0,0,0,1]},g.getTranslate=function(a){return[a[12],a[13],a[14]]},g.inverse=function(a){var b=a[5]*a[10]-a[6]*a[9],c=a[4]*a[10]-a[6]*a[8],d=a[4]*a[9]-a[5]*a[8],e=a[1]*a[10]-a[2]*a[9],f=a[0]*a[10]-a[2]*a[8],g=a[0]*a[9]-a[1]*a[8],h=a[1]*a[6]-a[2]*a[5],i=a[0]*a[6]-a[2]*a[4],j=a[0]*a[5]-a[1]*a[4],k=a[0]*b-a[1]*c+a[2]*d,l=1/k,m=[l*b,-l*e,l*h,0,-l*c,l*f,-l*i,0,l*d,-l*g,l*j,0,0,0,0,1];return m[12]=-a[12]*m[0]-a[13]*m[4]-a[14]*m[8],m[13]=-a[12]*m[1]-a[13]*m[5]-a[14]*m[9],m[14]=-a[12]*m[2]-a[13]*m[6]-a[14]*m[10],m},g.transpose=function(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]},g.interpret=function(a){var b=[a[0],a[1],a[2]],c=f(b[0]),h=e(b),i=[b[0]+c*h,b[1],b[2]],j=2/d(i);if(j>=1/0)return{translate:g.getTranslate(a),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];k[0]=1-j*i[0]*i[0],k[5]=1-j*i[1]*i[1],k[10]=1-j*i[2]*i[2],k[1]=-j*i[0]*i[1],k[2]=-j*i[0]*i[2],k[6]=-j*i[1]*i[2],k[4]=k[1],k[8]=k[2],k[9]=k[6];var l=g.multiply(k,a),m=[l[5],l[6]],n=f(m[0]),o=e(m),p=[m[0]+n*o,m[1]],q=2/d(p),r=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];r[5]=1-q*p[0]*p[0],r[10]=1-q*p[1]*p[1],r[6]=-q*p[0]*p[1],r[9]=r[6];var s=g.multiply(r,k),t=g.multiply(s,a),u=g.scale(t[0]<0?-1:1,t[5]<0?-1:1,t[10]<0?-1:1);t=g.multiply(t,u),s=g.multiply(u,s);var v={};return v.translate=g.getTranslate(a),v.rotate=[Math.atan2(-s[6],s[10]),Math.asin(s[2]),Math.atan2(-s[1],s[0])],v.rotate[0]||(v.rotate[0]=0,v.rotate[2]=Math.atan2(s[4],s[5])),v.scale=[t[0],t[5],t[10]],v.skew=[Math.atan2(t[9],v.scale[2]),Math.atan2(t[8],v.scale[2]),Math.atan2(t[4],v.scale[0])],Math.abs(v.rotate[0])+Math.abs(v.rotate[2])>1.5*Math.PI&&(v.rotate[1]=Math.PI-v.rotate[1],v.rotate[1]>Math.PI&&(v.rotate[1]-=2*Math.PI),v.rotate[1]<-Math.PI&&(v.rotate[1]+=2*Math.PI),v.rotate[0]<0?v.rotate[0]+=Math.PI:v.rotate[0]-=Math.PI,v.rotate[2]<0?v.rotate[2]+=Math.PI:v.rotate[2]-=Math.PI),v},g.average=function(a,b,c){c=void 0===c?.5:c;for(var d=g.interpret(a),e=g.interpret(b),f={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},h=0;3>h;h++)f.translate[h]=(1-c)*d.translate[h]+c*e.translate[h],f.rotate[h]=(1-c)*d.rotate[h]+c*e.rotate[h],f.scale[h]=(1-c)*d.scale[h]+c*e.scale[h],f.skew[h]=(1-c)*d.skew[h]+c*e.skew[h];return g.build(f)},g.build=function(a){var b=g.scale(a.scale[0],a.scale[1],a.scale[2]),c=g.skew(a.skew[0],a.skew[1],a.skew[2]),d=g.rotate(a.rotate[0],a.rotate[1],a.rotate[2]);return g.thenMove(g.multiply(g.multiply(d,c),b),a.translate)},g.equals=function(a,b){return!g.notEquals(a,b)},g.notEquals=function(a,b){return a===b?!1:!(a&&b)||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]},g.normalizeRotation=function(a){var b=a.slice(0);for((b[0]===.5*Math.PI||b[0]===.5*-Math.PI)&&(b[0]=-b[0],b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]>.5*Math.PI&&(b[0]=b[0]-Math.PI,b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]<.5*-Math.PI&&(b[0]=b[0]+Math.PI,b[1]=-Math.PI-b[1],b[2]-=Math.PI);b[1]<-Math.PI;)b[1]+=2*Math.PI;for(;b[1]>=Math.PI;)b[1]-=2*Math.PI;for(;b[2]<-Math.PI;)b[2]+=2*Math.PI;for(;b[2]>=Math.PI;)b[2]-=2*Math.PI;return b},g.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],g.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],c.exports=g}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(a,b,c){function d(){this.result={}}function e(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8],a[0]*b[1]+a[1]*b[5]+a[2]*b[9],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]]}var f=a("./Transform");d._instance=new d,d.parse=function(a,b){return d._instance.parse(a,b)},d.prototype.parse=function(a,b){return this.reset(),this._parseSpec(a,b,f.identity),this.result},d.prototype.reset=function(){this.result={}};var g=[0,0];d.prototype._parseSpec=function(a,b,c){var d,h,i,j,k,l,m;if("number"==typeof a){if(d=a,i=b.transform,l=b.align||g,b.size&&l&&(l[0]||l[1])){var n=[l[0]*b.size[0],l[1]*b.size[1],0];i=f.thenMove(i,e(n,c))}this.result[d]={transform:i,opacity:b.opacity,origin:b.origin||g,align:b.align||g,size:b.size}}else{if(!a)return;if(a instanceof Array)for(var o=0;o<a.length;o++)this._parseSpec(a[o],b,c);else{h=a.target,i=b.transform,j=b.opacity,k=b.origin,l=b.align,m=b.size;var p=c;if(void 0!==a.opacity&&(j=b.opacity*a.opacity),a.transform&&(i=f.multiply(b.transform,a.transform)),a.origin&&(k=a.origin,p=b.transform),a.align&&(l=a.align),a.size||a.proportions){var q=m;m=[m[0],m[1]],a.size&&(void 0!==a.size[0]&&(m[0]=a.size[0]),void 0!==a.size[1]&&(m[1]=a.size[1])),a.proportions&&(void 0!==a.proportions[0]&&(m[0]=m[0]*a.proportions[0]),void 0!==a.proportions[1]&&(m[1]=m[1]*a.proportions[1])),q&&(l&&(l[0]||l[1])&&(i=f.thenMove(i,e([l[0]*q[0],l[1]*q[1],0],c))),k&&(k[0]||k[1])&&(i=f.moveThen([-k[0]*m[0],-k[1]*m[1],0],i))),p=b.transform,k=null,l=null}this._parseSpec(h,{transform:i,opacity:j,origin:k,align:l,size:m},p)}}},c.exports=d}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(a,b,c){function d(a){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,a&&this.set(a)}function e(a,b,c){for(var d=g.parse(a,b),h=Object.keys(d),i=0;i<h.length;i++){var j=h[i],k=f.get(j),l=d[j];l.allocator=b.allocator;var m=k.commit(l);m?e(m,b,c):c[j]=l}}var f=a("./Entity"),g=a("./SpecParser");d.prototype.add=function(a){var b=a instanceof d?a:new d(a);return this._child instanceof Array?this._child.push(b):this._child?(this._child=[this._child,b],this._hasMultipleChildren=!0,this._childResult=[]):this._child=b,b},d.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},d.prototype.set=function(a){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=a.render?!0:!1,this._isModifier=a.modify?!0:!1,this._object=a,this._child=null,a instanceof d?a:this},d.prototype.getSize=function(){var a=null,b=this.get();return b&&b.getSize&&(a=b.getSize()),!a&&this._child&&this._child.getSize&&(a=this._child.getSize()),a},d.prototype.commit=function(a){for(var b=Object.keys(this._prevResults),c=0;c<b.length;c++){var d=b[c];if(void 0===this._resultCache[d]){var g=f.get(d);g.cleanup&&g.cleanup(a.allocator)}}this._prevResults=this._resultCache,this._resultCache={},e(this.render(),a,this._resultCache)},d.prototype.render=function(){if(this._isRenderable)return this._object.render();var a=null;if(this._hasMultipleChildren){a=this._childResult;for(var b=this._child,c=0;c<b.length;c++)a[c]=b[c].render()}else this._child&&(a=this._child.render());return this._isModifier?this._object.modify(a):a},c.exports=d}),define("famous/core/EventEmitter",["require","exports","module"],function(a,b,c){function d(){this.listeners={},this._owner=this}d.prototype.emit=function(a,b){var c=this.listeners[a];if(c)for(var d=0;d<c.length;d++)c[d].call(this._owner,b);return this},d.prototype.on=function(a,b){a in this.listeners||(this.listeners[a]=[]);var c=this.listeners[a].indexOf(b);return 0>c&&this.listeners[a].push(b),this},d.prototype.addListener=d.prototype.on,d.prototype.removeListener=function(a,b){var c=this.listeners[a];if(void 0!==c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}return this},d.prototype.bindThis=function(a){this._owner=a},c.exports=d}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(a,b,c){function d(){e.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var e=a("./EventEmitter");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.setInputHandler=function(a,b){a.trigger=b.trigger.bind(b),b.subscribe&&b.unsubscribe&&(a.subscribe=b.subscribe.bind(b),a.unsubscribe=b.unsubscribe.bind(b))},d.setOutputHandler=function(a,b){b instanceof d&&b.bindThis(a),a.pipe=b.pipe.bind(b),a.unpipe=b.unpipe.bind(b),a.on=b.on.bind(b),a.addListener=a.on,a.removeListener=b.removeListener.bind(b)},d.prototype.emit=function(a,b){e.prototype.emit.apply(this,arguments);var c=0;for(c=0;c<this.downstream.length;c++)this.downstream[c].trigger&&this.downstream[c].trigger(a,b);for(c=0;c<this.downstreamFn.length;c++)this.downstreamFn[c](a,b);return this},d.prototype.trigger=d.prototype.emit,d.prototype.pipe=function(a){if(a.subscribe instanceof Function)return a.subscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return 0>c&&b.push(a),a instanceof Function?a("pipe",null):a.trigger&&a.trigger("pipe",null),a},d.prototype.unpipe=function(a){if(a.unsubscribe instanceof Function)return a.unsubscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return c>=0?(b.splice(c,1),a instanceof Function?a("unpipe",null):a.trigger&&a.trigger("unpipe",null),a):!1},d.prototype.on=function(a){if(e.prototype.on.apply(this,arguments),!(a in this.upstreamListeners)){var b=this.trigger.bind(this,a);this.upstreamListeners[a]=b;for(var c=0;c<this.upstream.length;c++)this.upstream[c].on(a,b)}return this},d.prototype.addListener=d.prototype.on,d.prototype.subscribe=function(a){var b=this.upstream.indexOf(a);if(0>b){this.upstream.push(a);for(var c in this.upstreamListeners)a.on(c,this.upstreamListeners[c])}return this},d.prototype.unsubscribe=function(a){var b=this.upstream.indexOf(a);if(b>=0){this.upstream.splice(b,1);for(var c in this.upstreamListeners)a.removeListener(c,this.upstreamListeners[c])}return this},c.exports=d}),define("famous/core/ElementAllocator",["require","exports","module"],function(a,b,c){function d(a){a||(a=document.createDocumentFragment()),this.container=a,this.detachedNodes={},this.nodeCount=0}d.prototype.migrate=function(a){var b=this.container;if(a!==b){if(b instanceof DocumentFragment)a.appendChild(b);else for(;b.hasChildNodes();)a.appendChild(b.firstChild);this.container=a}},d.prototype.allocate=function(a){a=a.toLowerCase(),a in this.detachedNodes||(this.detachedNodes[a]=[]);var b,c=this.detachedNodes[a];return c.length>0?b=c.pop():(b=document.createElement(a),this.container.appendChild(b)),this.nodeCount++,b},d.prototype.deallocate=function(a){var b=a.nodeName.toLowerCase(),c=this.detachedNodes[b];c.push(a),this.nodeCount--},d.prototype.getNodeCount=function(){return this.nodeCount},c.exports=d}),define("famous/utilities/Utility",["require","exports","module"],function(a,b,c){var d={};d.Direction={X:0,Y:1,Z:2},d.after=function(a,b){var c=a;return function(){c--,0===c&&b.apply(this,arguments)}},d.loadURL=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===this.readyState&&b&&b(this.responseText)},c.open("GET",a),c.send()},d.createDocumentFragmentFromHTML=function(a){var b=document.createElement("div");b.innerHTML=a;for(var c=document.createDocumentFragment();b.hasChildNodes();)c.appendChild(b.firstChild);return c},d.clone=function(a){var b;if("object"==typeof a){b=a instanceof Array?[]:{};for(var c in a)if("object"==typeof a[c]&&null!==a[c])if(a[c]instanceof Array){b[c]=new Array(a[c].length);for(var e=0;e<a[c].length;e++)b[c][e]=d.clone(a[c][e])}else b[c]=d.clone(a[c]);else b[c]=a[c]}else b=a;return b},c.exports=d}),define("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(a,b,c){function d(a){this.method=a,this._instances=[],this.state=[]}var e=a("../utilities/Utility");d.SUPPORTS_MULTIPLE=!0,d.prototype.get=function(){for(var a=0;a<this._instances.length;a++)this.state[a]=this._instances[a].get();return this.state},d.prototype.set=function(a,b,c){for(var d=e.after(a.length,c),f=0;f<a.length;f++)this._instances[f]||(this._instances[f]=new this.method),this._instances[f].set(a[f],b,d)},d.prototype.reset=function(a){for(var b=0;b<a.length;b++)this._instances[b]||(this._instances[b]=new this.method),this._instances[b].reset(a[b])},c.exports=d}),define("famous/transitions/TweenTransition",["require","exports","module"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function e(a,b,c){return(1-c)*a+c*b}function f(a){return a instanceof Object?a instanceof Array?a.slice(0):Object.create(a):a}function g(a,b){var c={curve:b.curve};return b.duration&&(c.duration=b.duration),b.speed&&(c.speed=b.speed),a instanceof Object&&(void 0!==a.duration&&(c.duration=a.duration),a.curve&&(c.curve=a.curve),a.speed&&(c.speed=a.speed)),"string"==typeof c.curve&&(c.curve=d.getCurve(c.curve)),c}function h(a,b,c,d,e){var f,g=1e-7,h=(c(e)-c(e-g))/g;if(a instanceof Array){f=[];for(var i=0;i<a.length;i++)f[i]="number"==typeof a[i]?h*(a[i]-b[i])/d:0}else f=h*(a-b)/d;return f}function i(a,b,c){var d;if(a instanceof Array){d=[];for(var f=0;f<a.length;f++)d[f]="number"==typeof a[f]?e(a[f],b[f],c):a[f]}else d=e(a,b,c);return d}d.Curves={linear:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return a*(2-a)},easeInOut:function(a){return.5>=a?2*a*a:-2*a*a+4*a-1},easeOutBounce:function(a){return a*(3-2*a)},spring:function(a){return(1-a)*Math.sin(6*Math.PI*a)+a}},d.SUPPORTS_MULTIPLE=!0,d.DEFAULT_OPTIONS={curve:d.Curves.linear,duration:500,speed:0};var j={};d.registerCurve=function(a,b){return j[a]?!1:(j[a]=b,!0)},d.unregisterCurve=function(a){return j[a]?(delete j[a],!0):!1},d.getCurve=function(a){var b=j[a];if(void 0!==b)return b;throw new Error("curve not registered")},d.getCurves=function(){return j},d.prototype.setOptions=function(a){void 0!==a.curve&&(this.options.curve=a.curve),void 0!==a.duration&&(this.options.duration=a.duration),void 0!==a.speed&&(this.options.speed=a.speed)},d.prototype.set=function(a,b,c){if(!b)return this.reset(a),void(c&&c());if(this._startValue=f(this.get()),b=g(b,this.options),b.speed){var d=this._startValue;if(d instanceof Object){var e=0;for(var h in d)e+=(a[h]-d[h])*(a[h]-d[h]);b.duration=Math.sqrt(e)/b.speed}else b.duration=Math.abs(a-d)/b.speed}this._startTime=Date.now(),this._endValue=f(a),this._startVelocity=f(b.velocity),this._duration=b.duration,this._curve=b.curve,this._active=!0,this._callback=c},d.prototype.reset=function(a,b){if(this._callback){var c=this._callback;this._callback=void 0,c()}this.state=f(a),this.velocity=f(b),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},d.prototype.getVelocity=function(){return this.velocity},d.prototype.get=function(a){return this.update(a),this.state},d.prototype.update=function(a){if(this._active){if(a||(a=Date.now()),!(this._updateTime>=a)){this._updateTime=a;var b=a-this._startTime;if(b>=this._duration)this.state=this._endValue,this.velocity=h(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>b)this.state=this._startValue,this.velocity=this._startVelocity;else{var c=b/this._duration;this.state=i(this._startValue,this._endValue,this._curve(c)),this.velocity=h(this.state,this._startValue,this._curve,this._duration,c)}}}else if(this._callback){var d=this._callback;this._callback=void 0,d()}},d.prototype.isActive=function(){return this._active},d.prototype.halt=function(){this.reset(this.get())},d.registerCurve("linear",d.Curves.linear),d.registerCurve("easeIn",d.Curves.easeIn),d.registerCurve("easeOut",d.Curves.easeOut),d.registerCurve("easeInOut",d.Curves.easeInOut),d.registerCurve("easeOutBounce",d.Curves.easeOutBounce),d.registerCurve("spring",d.Curves.spring),d.customCurve=function(a,b){return a=a||0,b=b||0,function(c){return a*c+(-2*a-b+3)*c*c+(a+b-2)*c*c*c}},c.exports=d}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(a,b,c){function d(a){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(a)}function e(){if(this._callback){var a=this._callback;this._callback=void 0,a()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var b=null,c=this.currentAction[0],d=this.currentAction[1];d instanceof Object&&d.method?(b=d.method,"string"==typeof b&&(b=h[b])):b=g,this._currentMethod!==b&&(this._engineInstance=!(c instanceof Object)||b.SUPPORTS_MULTIPLE===!0||c.length<=b.SUPPORTS_MULTIPLE?new b:new f(b),this._currentMethod=b),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(d.velocity=this.velocity),this._engineInstance.set(c,d,e.bind(this))}var f=a("./MultipleTransition"),g=a("./TweenTransition"),h={};d.register=function(a){var b=!0;for(var c in a)d.registerMethod(c,a[c])||(b=!1);return b},d.registerMethod=function(a,b){return a in h?!1:(h[a]=b,!0)},d.unregisterMethod=function(a){return a in h?(delete h[a],!0):!1},d.prototype.set=function(a,b,c){if(!b)return this.reset(a),c&&c(),this;var d=[a,b];return this.actionQueue.push(d),this.callbackQueue.push(c),this.currentAction||e.call(this),this},d.prototype.reset=function(a,b){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=a,this.velocity=b,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},d.prototype.delay=function(a,b){this.set(this.get(),{duration:a,curve:function(){return 0}},b)},d.prototype.get=function(a){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(a)),this.state},d.prototype.isActive=function(){return!!this.currentAction},d.prototype.halt=function(){return this.set(this.get())},c.exports=d}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(a,b,c){function d(a){return[a.clientWidth,a.clientHeight]}function e(a){this.container=a,this._allocator=new h(a),this._node=new f,this._eventOutput=new g,this._size=d(this.container),this._perspectiveState=new j(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:i.identity,opacity:1,origin:k,align:k,size:this._size},this._eventOutput.on("resize",function(){this.setSize(d(this.container))}.bind(this))}var f=a("./RenderNode"),g=a("./EventHandler"),h=a("./ElementAllocator"),i=a("./Transform"),j=a("../transitions/Transitionable"),k=[0,0],l=!("perspective"in document.documentElement.style),m=l?function(a,b){a.style.webkitPerspective=b?b.toFixed()+"px":""}:function(a,b){a.style.perspective=b?b.toFixed()+"px":""};e.prototype.getAllocator=function(){return this._allocator},e.prototype.add=function(a){return this._node.add(a)},e.prototype.migrate=function(a){a!==this.container&&(this.container=a,this._allocator.migrate(a))},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(a){a||(a=d(this.container)),this._size[0]=a[0],this._size[1]=a[1]},e.prototype.update=function(a){a&&(a.transform&&(this._nodeContext.transform=a.transform),a.opacity&&(this._nodeContext.opacity=a.opacity),a.origin&&(this._nodeContext.origin=a.origin),a.align&&(this._nodeContext.align=a.align),a.size&&(this._nodeContext.size=a.size));var b=this._perspectiveState.get();b!==this._perspective&&(m(this.container,b),this._perspective=b),this._node.commit(this._nodeContext)},e.prototype.getPerspective=function(){return this._perspectiveState.get()},e.prototype.setPerspective=function(a,b,c){return this._perspectiveState.set(a,b,c)},e.prototype.emit=function(a,b){return this._eventOutput.emit(a,b)},e.prototype.on=function(a,b){return this._eventOutput.on(a,b)},e.prototype.removeListener=function(a,b){return this._eventOutput.removeListener(a,b)},e.prototype.pipe=function(a){return this._eventOutput.pipe(a)},e.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},c.exports=e}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(a,b,c){function d(a){this._value=a,this.eventOutput=null}function e(){this.eventOutput=new f,this.eventOutput.bindThis(this),f.setOutputHandler(this,this.eventOutput)}var f=a("./EventHandler");d.patch=function(a){for(var b=new d(a),c=1;c<arguments.length;c++)b.patch(arguments[c]);return a},d.prototype.patch=function(){for(var a=this._value,b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)d in a&&c[d]&&c[d].constructor===Object&&a[d]&&a[d].constructor===Object?(a.hasOwnProperty(d)||(a[d]=Object.create(a[d])),this.key(d).patch(c[d]),this.eventOutput&&this.eventOutput.emit("change",{id:d,value:this.key(d).value()})):this.set(d,c[d])}return this},d.prototype.setOptions=d.prototype.patch,d.prototype.key=function(a){var b=new d(this._value[a]);return(!(b._value instanceof Object)||b._value instanceof Array)&&(b._value={}),b},d.prototype.get=function(a){return a?this._value[a]:this._value},d.prototype.getOptions=d.prototype.get,d.prototype.set=function(a,b){var c=this.get(a);return this._value[a]=b,this.eventOutput&&b!==c&&this.eventOutput.emit("change",{id:a,value:b}),this},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.removeListener=function(){return e.call(this),this.removeListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.unpipe=function(){return e.call(this),this.unpipe.apply(this,arguments)},c.exports=d}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(a,b,c){function d(){y.runLoop?(o.step(),window.requestAnimationFrame(d)):v=!1}function e(){for(var a=0;a<p.length;a++)p[a].emit("resize");x.emit("resize")}function f(){window.addEventListener("touchmove",function(a){a.preventDefault()},!0),g()}function g(){return document.body?(document.body.classList.add("famous-root"),void document.documentElement.classList.add("famous-root")):void o.nextTick(g)}function h(a,b){return document.body?void document.body.addEventListener(a,b):void o.nextTick(addEventListener.bind(this,a,b))}function i(a,b){return document.body?(document.body.appendChild(b),void a.emit("resize")):void o.nextTick(i.bind(this,a,b))}var j,k,l=a("./Context"),m=a("./EventHandler"),n=a("./OptionsManager"),o={},p=[],q=[],r=0,s=0,t=[],u=Date.now(),v=!0,w={},x=new m,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},z=new n(y),A=10;o.step=function(){r++,s=r;var a=Date.now();if(!(k&&k>a-u)){var b=0;j=a-u,u=a,x.emit("prerender");for(var c=q.length;c--;)q.shift()(r);for(;t.length&&Date.now()-a<A;)t.shift().call(this);for(b=0;b<p.length;b++)p[b].update();x.emit("postrender")}},window.requestAnimationFrame(d),window.addEventListener("resize",e,!1),e();var B=!1;o.pipe=function(a){return a.subscribe instanceof Function?a.subscribe(o):x.pipe(a)},o.unpipe=function(a){return a.unsubscribe instanceof Function?a.unsubscribe(o):x.unpipe(a)},o.on=function(a,b){return a in w||(w[a]=x.emit.bind(x,a),h(a,w[a])),x.on(a,b)},o.emit=function(a,b){return x.emit(a,b)},o.removeListener=function(a,b){return x.removeListener(a,b)},o.getFPS=function(){return 1e3/j},o.setFPSCap=function(a){k=Math.floor(1e3/a)},o.getOptions=function(a){return z.getOptions(a)},o.setOptions=function(){return z.setOptions.apply(z,arguments)},o.createContext=function(a){!B&&y.appMode&&o.nextTick(f);var b=!1;a||(a=document.createElement(y.containerType),a.classList.add(y.containerClass),b=!0);var c=new l(a);return o.registerContext(c),b&&i(c,a),c},o.registerContext=function(a){return p.push(a),a},o.getContexts=function(){return p},o.deregisterContext=function(a){var b=p.indexOf(a);b>=0&&p.splice(b,1)},o.nextTick=function(a){q.push(a)},o.defer=function(a){t.push(a)},z.on("change",function(a){"fpsCap"===a.id?o.setFPSCap(a.value):"runLoop"===a.id&&!v&&a.value&&(v=!0,window.requestAnimationFrame(d))}),c.exports=o}),define("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function e(a){return a.applyForce?this._forces:a.applyConstraint?this._constraints:void 0}function f(a,b,c){return void 0===b&&(b=this.getParticlesAndBodies()),b instanceof Array||(b=[b]),a.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:a,id:this._currAgentId,targets:b,source:c},e.call(this,a).push(this._currAgentId),this._currAgentId++}function g(a){return this._agentData[a]}function h(a){var b=g.call(this,this._forces[a]);b.agent.applyForce(b.targets,b.source)}function i(){for(var a=this._forces.length-1;a>-1;a--)h.call(this,a)}function j(a,b){var c=this._agentData[this._constraints[a]];return c.agent.applyConstraint(c.targets,c.source,b)}function k(a){for(var b=0;b<this.options.constraintSteps;){for(var c=this._constraints.length-1;c>-1;c--)j.call(this,c,a);b++}}function l(a,b){a.integrateVelocity(b),this.options.velocityCap&&a.velocity.cap(this.options.velocityCap).put(a.velocity)}function m(a,b){a.integrateAngularMomentum(b),a.updateAngularVelocity(),this.options.angularVelocityCap&&a.angularVelocity.cap(this.options.angularVelocityCap).put(a.angularVelocity)}function n(a,b){a.integrateOrientation(b)}function o(a,b){a.integratePosition(b),a.emit(x.update,a)}function p(a){i.call(this,a),this.forEach(l,a),this.forEachBody(m,a),k.call(this,a),this.forEachBody(n,a),this.forEach(o,a)}function q(){var a=0,b=0;return this.forEach(function(c){b=c.getEnergy(),a+=b}),a}function r(){var a=0;for(var b in this._agentData)a+=this.getAgentEnergy(b);return a}var s=a("../core/EventHandler"),t=17,u=1e3/120,v=17,w=Date.now,x={start:"start",update:"update",end:"end"};d.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},d.prototype.setOptions=function(a){for(var b in a)this.options[b]&&(this.options[b]=a[b])},d.prototype.addBody=function(a){return a._engine=this,a.isBody?(this._bodies.push(a),this._hasBodies=!0):this._particles.push(a),a.on("start",this.wake.bind(this)),a},d.prototype.removeBody=function(a){var b=a.isBody?this._bodies:this._particles,c=b.indexOf(a);if(c>-1){for(var d in this._agentData)this._agentData.hasOwnProperty(d)&&this.detachFrom(this._agentData[d].id,a);b.splice(c,1)}0===this.getBodies().length&&(this._hasBodies=!1)},d.prototype.attach=function(a,b,c){if(this.wake(),a instanceof Array){for(var d=[],e=0;e<a.length;e++)d[e]=f.call(this,a[e],b,c);return d}return f.call(this,a,b,c)},d.prototype.attachTo=function(a,b){g.call(this,a).targets.push(b)},d.prototype.detach=function(a){var b=this.getAgent(a),c=e.call(this,b),d=c.indexOf(a);c.splice(d,1),delete this._agentData[a]},d.prototype.detachFrom=function(a,b){var c=g.call(this,a);if(c.source===b)this.detach(a);else{var d=c.targets,e=d.indexOf(b);e>-1&&d.splice(e,1)}},d.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},d.prototype.getAgent=function(a){return g.call(this,a).agent},d.prototype.getParticles=function(){return this._particles},d.prototype.getBodies=function(){return this._bodies},d.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},d.prototype.forEachParticle=function(a,b){for(var c=this.getParticles(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},d.prototype.forEachBody=function(a,b){if(this._hasBodies)for(var c=this.getBodies(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},d.prototype.forEach=function(a,b){this.forEachParticle(a,b),this.forEachBody(a,b)},d.prototype.getAgentEnergy=function(a){var b=g.call(this,a);return b.agent.getEnergy(b.targets,b.source)},d.prototype.getEnergy=function(){return q.call(this)+r.call(this)},d.prototype.step=function(){if(!this.isSleeping()){var a=w(),b=a-this._prevTime;this._prevTime=a,u>b||(b>v&&(b=v),p.call(this,t),this.emit(x.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},d.prototype.isSleeping=function(){return this._isSleeping},d.prototype.isActive=function(){return!this._isSleeping},d.prototype.sleep=function(){this._isSleeping||(this.forEach(function(a){a.sleep()
}),this.emit(x.end,this),this._isSleeping=!0)},d.prototype.wake=function(){this._isSleeping&&(this._prevTime=w(),this.emit(x.start,this),this._isSleeping=!1)},d.prototype.emit=function(a,b){null!==this._eventHandler&&this._eventHandler.emit(a,b)},d.prototype.on=function(a,b){null===this._eventHandler&&(this._eventHandler=new s),this._eventHandler.on(a,b)},c.exports=d}),define("famous/math/Vector",["require","exports","module"],function(a,b,c){function d(a,b,c){return 1===arguments.length&&void 0!==a?this.set(a):(this.x=a||0,this.y=b||0,this.z=c||0),this}function e(a,b,c){return this.x=a,this.y=b,this.z=c,this}function f(a){return e.call(this,a[0],a[1],a[2]||0)}function g(a){return e.call(this,a.x,a.y,a.z)}function h(a){return e.call(this,a,0,0)}var i=new d(0,0,0);d.prototype.add=function(a){return e.call(i,this.x+a.x,this.y+a.y,this.z+a.z)},d.prototype.sub=function(a){return e.call(i,this.x-a.x,this.y-a.y,this.z-a.z)},d.prototype.mult=function(a){return e.call(i,a*this.x,a*this.y,a*this.z)},d.prototype.div=function(a){return this.mult(1/a)},d.prototype.cross=function(a){var b=this.x,c=this.y,d=this.z,f=a.x,g=a.y,h=a.z;return e.call(i,d*g-c*h,b*h-d*f,c*f-b*g)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},d.prototype.rotateX=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,b,c*f-d*g,c*g+d*f)},d.prototype.rotateY=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,d*g+b*f,c,d*f-b*g)},d.prototype.rotateZ=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,b*f-c*g,b*g+c*f,d)},d.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},d.prototype.normSquared=function(){return this.dot(this)},d.prototype.norm=function(){return Math.sqrt(this.normSquared())},d.prototype.normalize=function(a){0===arguments.length&&(a=1);var b=this.norm();return b>1e-7?g.call(i,this.mult(a/b)):e.call(i,a,0,0)},d.prototype.clone=function(){return new d(this)},d.prototype.isZero=function(){return!(this.x||this.y||this.z)},d.prototype.set=function(a){return a instanceof Array?f.call(this,a):"number"==typeof a?h.call(this,a):g.call(this,a)},d.prototype.setXYZ=function(){return e.apply(this,arguments)},d.prototype.set1D=function(a){return h.call(this,a)},d.prototype.put=function(a){this===i?g.call(a,i):g.call(a,this)},d.prototype.clear=function(){return e.call(this,0,0,0)},d.prototype.cap=function j(j){if(1/0===j)return g.call(i,this);var a=this.norm();return a>j?g.call(i,this.mult(j/a)):g.call(i,this)},d.prototype.project=function(a){return a.mult(this.dot(a))},d.prototype.reflectAcross=function(a){return a.normalize().put(a),g(i,this.sub(this.project(a).mult(2)))},d.prototype.get=function(){return[this.x,this.y,this.z]},d.prototype.get1D=function(){return this.x},c.exports=d}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(a,b,c){var d={};d.integrateVelocity=function(a,b){var c=a.velocity,d=a.inverseMass,e=a.force;e.isZero()||(c.add(e.mult(b*d)).put(c),e.clear())},d.integratePosition=function(a,b){var c=a.position,d=a.velocity;c.add(d.mult(b)).put(c)},d.integrateAngularMomentum=function(a,b){var c=a.angularMomentum,d=a.torque;d.isZero()||(c.add(d.mult(b)).put(c),d.clear())},d.integrateOrientation=function(a,b){var c=a.orientation,d=a.angularVelocity;d.isZero()||c.add(c.multiply(d).scalarMultiply(.5*b)).put(c)},c.exports=d}),define("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(a,b,c){function d(a){a=a||{};var b=d.DEFAULT_OPTIONS;this.position=new f,this.velocity=new f,this.force=new f,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==a.mass?a.mass:b.mass,this.inverseMass=1/this.mass,this.setPosition(a.position||b.position),this.setVelocity(a.velocity||b.velocity),this.force.set(a.force||[0,0,0]),this.transform=g.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function e(){this._eventOutput=new h,this._eventOutput.bindThis(this),h.setOutputHandler(this,this._eventOutput)}var f=a("../../math/Vector"),g=a("../../core/Transform"),h=a("../../core/EventHandler"),i=a("../integrators/SymplecticEuler");d.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var j={start:"start",update:"update",end:"end"},k=Date.now;d.prototype.isBody=!1,d.prototype.isActive=function(){return!this._isSleeping},d.prototype.sleep=function(){this._isSleeping||(this.emit(j.end,this),this._isSleeping=!0)},d.prototype.wake=function(){this._isSleeping&&(this.emit(j.start,this),this._isSleeping=!1,this._prevTime=k(),this._engine&&this._engine.wake())},d.prototype.setPosition=function(a){this.position.set(a)},d.prototype.setPosition1D=function(a){this.position.x=a},d.prototype.getPosition=function(){return this._engine.step(),this.position.get()},d.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},d.prototype.setVelocity=function(a){this.velocity.set(a),(0!==a[0]||0!==a[1]||0!==a[2])&&this.wake()},d.prototype.setVelocity1D=function(a){this.velocity.x=a,0!==a&&this.wake()},d.prototype.getVelocity=function(){return this.velocity.get()},d.prototype.setForce=function(a){this.force.set(a),this.wake()},d.prototype.getVelocity1D=function(){return this.velocity.x},d.prototype.setMass=function(a){this.mass=a,this.inverseMass=1/a},d.prototype.getMass=function(){return this.mass},d.prototype.reset=function(a,b){this.setPosition(a||[0,0,0]),this.setVelocity(b||[0,0,0])},d.prototype.applyForce=function(a){a.isZero()||(this.force.add(a).put(this.force),this.wake())},d.prototype.applyImpulse=function(a){if(!a.isZero()){var b=this.velocity;b.add(a.mult(this.inverseMass)).put(b)}},d.prototype.integrateVelocity=function(a){i.integrateVelocity(this,a)},d.prototype.integratePosition=function(a){i.integratePosition(this,a)},d.prototype._integrate=function(a){this.integrateVelocity(a),this.integratePosition(a)},d.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},d.prototype.getTransform=function(){this._engine.step();var a=this.position,b=this.transform;return b[12]=a.x,b[13]=a.y,b[14]=a.z,b},d.prototype.modify=function(a){var b=this._spec.target;return b.transform=this.getTransform(),b.target=a,this._spec},d.prototype.emit=function(a,b){this._eventOutput&&this._eventOutput.emit(a,b)},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.removeListener=function(){return e.call(this),this.removeListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.unpipe=function(){return e.call(this),this.unpipe.apply(this,arguments)},c.exports=d}),define("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(a,b,c){function d(a){this.force=new e(a),this._eventOutput=new f,f.setOutputHandler(this,this._eventOutput)}var e=a("../../math/Vector"),f=a("../../core/EventHandler");d.prototype.setOptions=function(a){this._eventOutput.emit("change",a)},d.prototype.applyForce=function(a){for(var b=a.length;b--;)a[b].applyForce(this.force)},d.prototype.getEnergy=function(){return 0},c.exports=d}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),e.call(this)}var e=a("./Force");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.FORCE_FUNCTIONS={LINEAR:function(a){return a},QUADRATIC:function(a){return a.mult(a.norm())}},d.DEFAULT_OPTIONS={strength:.01,forceFunction:d.FORCE_FUNCTIONS.LINEAR},d.prototype.applyForce=function(a){var b,c,d=this.options.strength,e=this.options.forceFunction,f=this.force;for(b=0;b<a.length;b++)c=a[b],e(c.velocity).mult(-d).put(f),c.applyForce(f)},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.exports=d}),define("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(a,b,c){function d(a){h.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.disp=new i(0,0,0),g.call(this)}function e(){var a=this.options;a.stiffness=Math.pow(2*j/a.period,2)}function f(){var a=this.options;a.damping=4*j*a.dampingRatio/a.period}function g(){e.call(this),f.call(this)}var h=a("./Force"),i=a("../../math/Vector");d.prototype=Object.create(h.prototype),d.prototype.constructor=d;var j=Math.PI,k=150;d.FORCE_FUNCTIONS={FENE:function(a,b){var c=.99*b,d=Math.max(Math.min(a,c),-c);return d/(1-d*d/(b*b))},HOOK:function(a){return a}},d.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:d.FORCE_FUNCTIONS.HOOK},d.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor.position instanceof i&&(this.options.anchor=a.anchor.position),a.anchor instanceof i&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new i(a.anchor))),void 0!==a.period&&(a.period<k&&(a.period=k,console.warn("The period of a SpringTransition is capped at "+k+" ms. Use a SnapTransition for faster transitions")),this.options.period=a.period),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.length&&(this.options.length=a.length),void 0!==a.forceFunction&&(this.options.forceFunction=a.forceFunction),void 0!==a.maxLength&&(this.options.maxLength=a.maxLength),g.call(this),h.prototype.setOptions.call(this,a)},d.prototype.applyForce=function(a,b){var c,d,e,f,g,h,i=this.force,j=this.disp,k=this.options,l=k.stiffness,m=k.damping,n=k.length,o=k.maxLength,p=k.anchor||b.position,q=k.forceFunction;for(c=0;c<a.length;c++){if(d=a[c],e=d.position,f=d.velocity,p.sub(e).put(j),g=j.norm()-n,0===g)return;h=d.mass,l*=h,m*=h,j.normalize(l*q(g,o)).put(i),m&&(b?i.add(f.sub(b.velocity).mult(-m)).put(i):i.add(f.mult(-m)).put(i)),d.applyForce(i),b&&b.applyForce(i.mult(-1))}},d.prototype.getEnergy=function(a,b){for(var c=this.options,d=c.length,e=b?b.position:c.anchor,f=c.stiffness,g=0,h=0;h<a.length;h++){var i=a[h],j=e.sub(i.position).norm()-d;g+=.5*f*j*j}return g},c.exports=d}),define("famous/core/ViewSequence",["require","exports","module"],function(a,b,c){function d(a){a||(a=[]),a instanceof Array&&(a={array:a}),this._=null,this.index=a.index||0,a.array?this._=new this.constructor.Backing(a.array):a._&&(this._=a._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==a.loop&&(this._.loop=a.loop),void 0!==a.trackSize&&(this._.trackSize=a.trackSize),this._previousNode=null,this._nextNode=null}d.Backing=function(a){this.array=a,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},d.Backing.prototype.getValue=function(a){var b=a-this.firstIndex;return 0>b||b>=this.array.length?null:this.array[b]},d.Backing.prototype.setValue=function(a,b){this.array[a-this.firstIndex]=b},d.Backing.prototype.getSize=function(a){return this.cumulativeSizes[a]},d.Backing.prototype.calculateSize=function(a){a=a||this.array.length;for(var b=[0,0],c=0;a>c;c++){var d=this.array[c].getSize();if(!d)return void 0;void 0!==b[0]&&(void 0===d[0]?b[0]=void 0:b[0]+=d[0]),void 0!==b[1]&&(void 0===d[1]?b[1]=void 0:b[1]+=d[1]),this.cumulativeSizes[c+1]=b.slice()}return this.sizeDirty=!1,b},d.Backing.prototype.reindex=function(a,b,c){if(this.array[0]){for(var d=0,e=this.firstIndex,f=c-b,g=this.firstNode;a-1>e;)g=g.getNext(),e++;var h=g;for(d=0;b>d;d++)g=g.getNext(),g&&(g._previousNode=h);var i=g?g.getNext():null;for(h._nextNode=null,g=h,d=0;c>d;d++)g=g.getNext();if(e+=c,g!==i&&(g._nextNode=i,i&&(i._previousNode=g)),i)for(g=i,e++;g&&e<this.array.length+this.firstIndex;)g._nextNode?g.index+=f:g.index=e,g=g.getNext(),e++;this.trackSize&&(this.sizeDirty=!0)}},d.prototype.getPrevious=function(){var a=this._.array.length;return a?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+a-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},d.prototype.getNext=function(){var a=this._.array.length;return a?this.index===this._.firstIndex+a-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},d.prototype.indexOf=function(a){return this._.array.indexOf(a)},d.prototype.getIndex=function(){return this.index},d.prototype.toString=function(){return""+this.index},d.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},d.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},d.prototype.splice=function(a,b){var c=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[a-this._.firstIndex,b].concat(c)),this._.reindex(a,b,c.length)},d.prototype.swap=function(a){var b=a.get(),c=this.get();this._.setValue(this.index,b),this._.setValue(a.index,c);var d=this._previousNode,e=this._nextNode,f=this.index,g=a._previousNode,h=a._nextNode,i=a.index;this.index=i,this._previousNode=g===this?a:g,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=h===this?a:h,this._nextNode&&(this._nextNode._previousNode=this),a.index=f,a._previousNode=d===a?this:d,a._previousNode&&(a._previousNode._nextNode=a),a._nextNode=e===a?this:e,a._nextNode&&(a._nextNode._previousNode=a),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),a.index===this._.firstIndex?this._.firstNode=a:a.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=a),this._.trackSize&&(this._.sizeDirty=!0)},d.prototype.get=function(){return this._.getValue(this.index)},d.prototype.getSize=function(){var a=this.get();return a?a.getSize():null},d.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var a=this.get();return a?a.render.apply(a,arguments):null},c.exports=d}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(a,b,c){function d(a){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new k,this._eventOutput.bindThis(this),this.eventForwarder=function(a){this._eventOutput.emit(a.type,a)}.bind(this),this.id=j.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,a&&this.attach(a)}function e(a){for(var b in this._eventOutput.listeners)a.addEventListener(b,this.eventForwarder)}function f(a){for(var b in this._eventOutput.listeners)a.removeEventListener(b,this.eventForwarder)}function g(a){a[12]=Math.round(a[12]*n)/n,a[13]=Math.round(a[13]*n)/n;for(var b="matrix3d(",c=0;15>c;c++)b+=a[c]<1e-6&&a[c]>-1e-6?"0,":a[c]+",";return b+=a[15]+")"}function h(a){return 100*a[0]+"% "+100*a[1]+"%"}function i(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var j=a("./Entity"),k=a("./EventHandler"),l=a("./Transform"),m=!("transform"in document.documentElement.style),n=window.devicePixelRatio||1;d.prototype.on=function(a,b){this._element&&this._element.addEventListener(a,this.eventForwarder),this._eventOutput.on(a,b)},d.prototype.removeListener=function(a,b){this._eventOutput.removeListener(a,b)},d.prototype.emit=function(a,b){b&&!b.origin&&(b.origin=this);var c=this._eventOutput.emit(a,b);return c&&b&&b.stopPropagation&&b.stopPropagation(),c},d.prototype.pipe=function(a){return this._eventOutput.pipe(a)},d.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},d.prototype.render=function(){return this.id};var o;o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(a,b){a.style.zIndex=1e6*b[14]|0,a.style.transform=g(b)}:m?function(a,b){a.style.webkitTransform=g(b)}:function(a,b){a.style.transform=g(b)};var p=m?function(a,b){a.style.webkitTransformOrigin=h(b)}:function(a,b){a.style.transformOrigin=h(b)},q=m?function(a){a.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0}:function(a){a.style.transform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0};d.prototype.commit=function(a){var b=this._element;if(b){{var c=a.transform,d=a.opacity,e=a.origin;a.size}if(!c&&this._matrix)return this._matrix=null,this._opacity=0,void q(b);if(i(this._origin,e)&&(this._originDirty=!0),l.notEquals(this._matrix,c)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==d&&(this._opacity=d,b.style.opacity=d>=1?"0.999999":d),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(e?(this._origin||(this._origin=[0,0]),this._origin[0]=e[0],this._origin[1]=e[1]):this._origin=null,p(b,this._origin),this._originDirty=!1),c||(c=l.identity),this._matrix=c;var f=this._size?l.thenMove(c,[-this._size[0]*e[0],-this._size[1]*e[1],0]):c;o(b,f),this._transformDirty=!1}}},d.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},d.prototype.attach=function(a){this._element=a,e.call(this,a)},d.prototype.detach=function(){var a=this._element;return a&&(f.call(this,a),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,a},c.exports=d}),define("famous/core/Surface",["require","exports","module","./ElementOutput"],function(a,b,c){function d(a){k.call(this),this.options={},this.properties={},this.attributes={},this.scrollview="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],a&&this.setOptions(a),this._currentTarget=null}function e(a){for(var b=0;b<this._dirtyClasses.length;b++)a.classList.remove(this._dirtyClasses[b]);this._dirtyClasses=[]}function f(a){for(var b in this.properties)a.style[b]=this.properties[b]}function g(a){for(var b in this.properties)a.style[b]=""}function h(a){for(var b in this.attributes)a.setAttribute(b,this.attributes[b])}function i(a){for(var b in this.attributes)a.removeAttribute(b)}function j(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var k=a("./ElementOutput");d.prototype=Object.create(k.prototype),d.prototype.constructor=d,d.prototype.elementType="div",d.prototype.elementClass="famous-surface",d.prototype.setAttributes=function(a){for(var b in a){if("style"===b)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[b]=a[b]}this._attributesDirty=!0},d.prototype.getAttributes=function(){return this.attributes},d.prototype.setProperties=function(a){for(var b in a)this.properties[b]=a[b];return this._stylesDirty=!0,this},d.prototype.getProperties=function(){return this.properties},d.prototype.addClass=function(a){return this.classList.indexOf(a)<0&&(this.classList.push(a),this._classesDirty=!0),this},d.prototype.removeClass=function(a){var b=this.classList.indexOf(a);return b>=0&&(this._dirtyClasses.push(this.classList.splice(b,1)[0]),this._classesDirty=!0),this},d.prototype.toggleClass=function(a){var b=this.classList.indexOf(a);return b>=0?this.removeClass(a):this.addClass(a),this},d.prototype.setClasses=function(a){var b=0,c=[];for(b=0;b<this.classList.length;b++)a.indexOf(this.classList[b])<0&&c.push(this.classList[b]);for(b=0;b<c.length;b++)this.removeClass(c[b]);for(b=0;b<a.length;b++)this.addClass(a[b]);return this},d.prototype.getClassList=function(){return this.classList},d.prototype.setContent=function(a){return this.scrollview!==a&&(this.scrollview=a,this._contentDirty=!0),this},d.prototype.getContent=function(){return this.scrollview},d.prototype.setOptions=function(a){return a.size&&this.setSize(a.size),a.classes&&this.setClasses(a.classes),a.properties&&this.setProperties(a.properties),a.attributes&&this.setAttributes(a.attributes),a.scrollview&&this.setContent(a.scrollview),this},d.prototype.setup=function(a){var b=a.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var c=0;c<this.elementClass.length;c++)b.classList.add(this.elementClass[c]);else b.classList.add(this.elementClass);b.style.display="",this.attach(b),this._opacity=null,this._currentTarget=b,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},d.prototype.commit=function(a){this._currentTarget||this.setup(a.allocator);var b=this._currentTarget,c=a.size;if(this._classesDirty){e.call(this,b);for(var d=this.getClassList(),g=0;g<d.length;g++)b.classList.add(d[g]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(f.call(this,b),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(h.call(this,b),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var i=a.size;if(c=[this.size[0],this.size[1]],void 0===c[0]&&(c[0]=i[0]),void 0===c[1]&&(c[1]=i[1]),c[0]===!0||c[1]===!0){if(c[0]===!0)if(this._trueSizeCheck||0===this._size[0]){var l=b.offsetWidth;this._size&&this._size[0]!==l&&(this._size[0]=l,this._sizeDirty=!0),c[0]=l}else this._size&&(c[0]=this._size[0]);if(c[1]===!0)if(this._trueSizeCheck||0===this._size[1]){var m=b.offsetHeight;this._size&&this._size[1]!==m&&(this._size[1]=m,this._sizeDirty=!0),c[1]=m}else this._size&&(c[1]=this._size[1]);this._trueSizeCheck=!1}}j(this._size,c)&&(this._size||(this._size=[0,0]),this._size[0]=c[0],this._size[1]=c[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(b.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",b.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(b),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),k.prototype.commit.call(this,a)},d.prototype.cleanup=function(a){var b=0,c=this._currentTarget;this._eventOutput.emit("recall"),this.recall(c),c.style.display="none",c.style.opacity="",c.style.width="",c.style.height="",g.call(this,c),i.call(this,c);var d=this.getClassList();for(e.call(this,c),b=0;b<d.length;b++)c.classList.remove(d[b]);if(this.elementClass)if(this.elementClass instanceof Array)for(b=0;b<this.elementClass.length;b++)c.classList.remove(this.elementClass[b]);else c.classList.remove(this.elementClass);this.detach(c),this._currentTarget=null,a.deallocate(c)},d.prototype.deploy=function(a){var b=this.getContent();if(b instanceof Node){for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}else a.innerHTML=b},d.prototype.recall=function(a){for(var b=document.createDocumentFragment();a.hasChildNodes();)b.appendChild(a.firstChild);this.setContent(b)},d.prototype.getSize=function(){return this._size?this._size:this.size},d.prototype.setSize=function(a){return this.size=a?[a[0],a[1]]:null,this._sizeDirty=!0,this},c.exports=d}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(a,b,c){function d(a){g.call(this,a),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new e(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var e=a("./Context"),f=a("./Transform"),g=a("./Surface");d.SIZE_ZERO=[0,0],d.prototype=Object.create(g.prototype),d.prototype.elementType="div",d.prototype.elementClass="famous-group",d.prototype.add=function(){return this.context.add.apply(this.context,arguments)},d.prototype.render=function(){return g.prototype.render.call(this)},d.prototype.deploy=function(a){this.context.migrate(a)},d.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},d.prototype.commit=function(a){var b=a.transform,c=a.origin,e=a.opacity,h=a.size,i=g.prototype.commit.call(this,{allocator:a.allocator,transform:f.thenMove(b,[-c[0]*h[0],-c[1]*h[1],0]),opacity:e,origin:c,size:d.SIZE_ZERO});return(h[0]!==this._groupSize[0]||h[1]!==this._groupSize[1])&&(this._groupSize[0]=h[0],this._groupSize[1]=h[1],this.context.setSize(h)),this.context.update({transform:f.translate(-c[0]*h[0],-c[1]*h[1],0),origin:c,size:h}),i},c.exports=d}),define("famous/views/Scroller",["require","exports","module","../core/Entity","../core/Group","../core/OptionsManager","../core/Transform","../utilities/Utility","../core/ViewSequence","../core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new k(this.options),a&&this._optionsManager.setOptions(a),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new j,this.group.add({render:h.bind(this)}),this._entityId=i.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput)}function e(a){a||(a=this._contextSize);var b=this.options.direction;return void 0===a[b]?this._contextSize[b]:a[b]}function f(a,b,c){var d=a.getSize?a.getSize():this._contextSize,f=this._outputFunction(b);return c.push({transform:f,target:a.render()}),e.call(this,d)}function g(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?e.call(this,this.getCumulativeSize()):e.call(this,this._contextSize)}function h(){for(var a=null,b=this._position,c=[],d=-this._positionOffset,h=g.call(this),i=this._node;i&&d-b<h+this.options.margin;)d+=f.call(this,i,d,c),i=i.getNext?i.getNext():null;var j=this._node,k=e.call(this,j.getSize());if(h>d){for(;j&&h>k;)j=j.getPrevious(),j&&(k+=e.call(this,j.getSize()));for(j=this._node;j&&h>k;)j=j.getNext(),j&&(k+=e.call(this,j.getSize()))}for(!i&&h-p>d-b?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:d-h})):!this._node.getPrevious()&&-p>b?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),i=this._node&&this._node.getPrevious?this._node.getPrevious():null,d=-this._positionOffset,i&&(a=i.getSize?i.getSize():this._contextSize,d-=e.call(this,a));i&&d-b>-(h+this.options.margin);)f.call(this,i,d,c),i=i.getPrevious?i.getPrevious():null,i&&(a=i.getSize?i.getSize():this._contextSize,d-=e.call(this,a));return c}var i=a("../core/Entity"),j=a("../core/Group"),k=a("../core/OptionsManager"),l=a("../core/Transform"),m=a("../utilities/Utility"),n=a("../core/ViewSequence"),o=a("../core/EventHandler");d.DEFAULT_OPTIONS={direction:m.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var p=0;d.prototype.getCumulativeSize=function(a){return void 0===a&&(a=this._node._.cumulativeSizes.length-1),this._node._.getSize(a)},d.prototype.setOptions=function(a){a.groupScroll!==this.options.groupScroll&&(a.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(a)},d.prototype.onEdge=function(){return this._onEdge},d.prototype.outputFrom=function(a,b){a||(a=function(a){return this.options.direction===m.Direction.X?l.translate(a,0):l.translate(0,a)}.bind(this),b||(b=a)),this._outputFunction=a,this._masterOutputFunction=b?b:function(b){return l.inverse(a(-b))}},d.prototype.positionFrom=function(a){a instanceof Function?this._positionGetter=a:a&&a.get?this._positionGetter=a.get.bind(a):(this._positionGetter=null,this._position=a),this._positionGetter&&(this._position=this._positionGetter.call(this))},d.prototype.sequenceFrom=function(a){a instanceof Array&&(a=new n({array:a})),this._node=a,this._positionOffset=0},d.prototype.getSize=function(a){return a?this._contextSize:this._size},d.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},d.prototype.commit=function(a){var b=a.transform,c=a.opacity,d=a.origin,e=a.size;this.options.clipSize||e[0]===this._contextSize[0]&&e[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=e[0],this._contextSize[1]=e[1],this.options.direction===m.Direction.X?(this._size[0]=g.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=g.call(this)));var f=this._masterOutputFunction(-this._position);return{transform:l.multiply(b,f),size:e,opacity:c,origin:d,target:this.group.render()}},c.exports=d}),define("famous/inputs/GenericSync",["require","exports","module","../core/EventHandler"],function(a,b,c){function d(a,b){this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput),this._syncs={},a&&this.addSync(a),b&&this.setOptions(b)}function e(a,b){g[a]&&(this._syncs[a]=new g[a](b),this.pipeSync(a))}var f=a("../core/EventHandler");d.DIRECTION_X=0,d.DIRECTION_Y=1,d.DIRECTION_Z=2;var g={};d.register=function(a){for(var b in a)if(g[b]){if(g[b]!==a[b])throw new Error("Conflicting sync classes for key: "+b)}else g[b]=a[b]},d.prototype.setOptions=function(a){for(var b in this._syncs)this._syncs[b].setOptions(a)},d.prototype.pipeSync=function(a){var b=this._syncs[a];this._eventInput.pipe(b),b.pipe(this._eventOutput)},d.prototype.unpipeSync=function(a){var b=this._syncs[a];this._eventInput.unpipe(b),b.unpipe(this._eventOutput)},d.prototype.addSync=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)e.call(this,a[b]);else if(a instanceof Object)for(var c in a)e.call(this,c,a[c])},c.exports=d}),define("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),a&&this.setOptions(a),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new g,this._eventOutput=new g,g.setInputHandler(this,this._eventInput),g.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",f.bind(this)),this._eventInput.on("wheel",f.bind(this)),this._inProgress=!1,this._loopBound=!1}function e(){if(this._inProgress&&k()-this._prevTime>this.options.stallTime){this._inProgress=!1;var a=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,b=this._payload;b.position=this._position,b.velocity=a,b.slip=!0,this._eventOutput.emit("end",b)}}function f(a){this.options.preventDefault&&a.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,q=this._payload,q.slip=!0,q.position=this._position,q.clientX=a.clientX,q.clientY=a.clientY,q.offsetX=a.offsetX,q.offsetY=a.offsetY,this._eventOutput.emit("start",q),this._loopBound||(h.on("prerender",e.bind(this)),this._loopBound=!0));var b=k(),c=this._prevTime||b,f=void 0!==a.wheelDeltaX?a.wheelDeltaX:-a.deltaX,g=void 0!==a.wheelDeltaY?a.wheelDeltaY:-a.deltaY;1===a.deltaMode&&(f*=this.options.lineHeight,g*=this.options.lineHeight),this.options.rails&&(Math.abs(f)>Math.abs(g)?g=0:f=0);var i,l,m=Math.max(b-c,j),n=f/m,o=g/m,p=this.options.scale;this.options.direction===d.DIRECTION_X?(l=p*f,i=p*n,this._position+=l):this.options.direction===d.DIRECTION_Y?(l=p*g,i=p*o,this._position+=l):(l=[p*f,p*g],i=[p*n,p*o],this._position[0]+=l[0],this._position[1]+=l[1]);
var q=this._payload;q.delta=l,q.velocity=i,q.position=this._position,q.slip=!0,this._eventOutput.emit("update",q),this._prevTime=b,this._prevVel=i}var g=a("../core/EventHandler"),h=a("../core/Engine"),i=a("../core/OptionsManager");d.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},d.DIRECTION_X=0,d.DIRECTION_Y=1;var j=8,k=Date.now;d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.exports=d}),define("famous/inputs/TouchTracker",["require","exports","module","../core/EventHandler"],function(a,b,c){function d(a,b,c){return{x:a.clientX,y:a.clientY,identifier:a.identifier,origin:b.origin,timestamp:k(),count:b.touches.length,history:c}}function e(a){if(!(a.touches.length>this.touchLimit)){this.isTouched=!0;for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=d(c,a,null);this.eventOutput.emit("trackstart",e),this.selective||this.touchHistory[c.identifier]||this.track(e)}}}function f(a){if(!(a.touches.length>this.touchLimit))for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=this.touchHistory[c.identifier];if(e){var f=d(c,a,e);this.touchHistory[c.identifier].push(f),this.eventOutput.emit("trackmove",f)}}}function g(a){if(this.isTouched){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=this.touchHistory[c.identifier];if(e){var f=d(c,a,e);this.touchHistory[c.identifier].push(f),this.eventOutput.emit("trackend",f),delete this.touchHistory[c.identifier]}}this.isTouched=!1}}function h(){for(var a in this.touchHistory){var b=this.touchHistory[a];this.eventOutput.emit("trackend",{touch:b[b.length-1].touch,timestamp:Date.now(),count:0,history:b}),delete this.touchHistory[a]}}function i(a){this.selective=a.selective,this.touchLimit=a.touchLimit||1,this.touchHistory={},this.eventInput=new j,this.eventOutput=new j,j.setInputHandler(this,this.eventInput),j.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",e.bind(this)),this.eventInput.on("touchmove",f.bind(this)),this.eventInput.on("touchend",g.bind(this)),this.eventInput.on("touchcancel",g.bind(this)),this.eventInput.on("unpipe",h.bind(this)),this.isTouched=!1}var j=a("../core/EventHandler"),k=Date.now;i.prototype.track=function(a){this.touchHistory[a.identifier]=[a]},c.exports=i}),define("famous/inputs/SyncUtils",["require","exports","module"],function(a,b,c){c.exports={getTimeHistoryPosition:function(a,b){for(var c,d,e,f=a.length-1,g=f,h=!0,i=0;h;){if(d=a[g],0>g)return c;if(d&&c&&(e=c.timestamp-d.timestamp,i+=e,i>=b))return h=!1,d;g--,c=d}}}}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","../core/EventHandler","../core/OptionsManager","./SyncUtils"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new k(this.options),a&&this.setOptions(a),this._eventOutput=new j,this._touchTracker=new i({touchLimit:this.options.touchLimit}),j.setOutputHandler(this,this._eventOutput),j.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",e.bind(this)),this._touchTracker.on("trackmove",f.bind(this)),this._touchTracker.on("trackend",h.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function e(a){var b,c;void 0!==this.options.direction?(this._position=0,b=0,c=0):(this._position=[0,0],b=[0,0],c=[0,0]);var d=this._payload;d.delta=c,d.position=this._position,d.velocity=b,d.clientX=a.x,d.clientY=a.y,d.count=a.count,d.touch=a.identifier,this._eventOutput.emit("start",d)}function f(a){g.call(this,a)}function g(a){var b=a.history,c=b[b.length-1],e=l.getTimeHistoryPosition(b,this.options.timeSampleDuration),f=e.timestamp,g=c.timestamp,h=c.x-e.x,i=c.y-e.y,j=c.x-f,k=c.y-f;this.options.rails&&(Math.abs(h)>Math.abs(i)?i=0:h=0,Math.abs(j)>Math.abs(k)?k=0:j=0);var n,o,p=Math.max(g-f,m),q=j/p,r=k/p,s=this.options.scale;this.options.direction===d.DIRECTION_X?(o=s*h,n=s*q,this._position+=o):this.options.direction===d.DIRECTION_Y?(o=s*i,n=s*r,this._position+=o):(o=[s*h,s*i],n=[s*q,s*r],this._position[0]+=o[0],this._position[1]+=o[1]);var t=this._payload;t.delta=o,t.velocity=n,t.position=this._position,t.clientX=a.x,t.clientY=a.y,t.count=a.count,t.touch=a.identifier,this._eventOutput.emit("update",t)}function h(a){g.call(this,a),this._payload.count=a.count,this._eventOutput.emit("end",this._payload)}var i=a("./TouchTracker"),j=a("../core/EventHandler"),k=a("../core/OptionsManager"),l=a("./SyncUtils");d.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1,timeSampleDuration:400},d.DIRECTION_X=0,d.DIRECTION_Y=1;var m=8;d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.getOptions=function(){return this.options},c.exports=d}),define("famous/views/ScrollView",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Drag","../physics/forces/Spring","../core/EventHandler","../core/OptionsManager","../core/ViewSequence","../views/Scroller","../utilities/Utility","../inputs/GenericSync","../inputs/ScrollSync","../inputs/TouchSync"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new v(this.options),this._scroller=new x(this.options),this.sync=new z(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==y.Direction.Y}),this._physicsEngine=new q,this._particle=new r,this._physicsEngine.addBody(this._particle),this.spring=new t({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new s({forceFunction:s.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new s({forceFunction:s.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=C.NONE,this._onEdge=D.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new u,this._eventOutput=new u,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),h.call(this),a&&this.setOptions(a)}function e(a){this._touchCount=a.count,void 0===a.count&&(this._touchCount=1),j.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function f(a){var b=-a.velocity,c=-a.delta;if(this._onEdge!==D.NONE&&a.slip&&(0>b&&this._onEdge===D.TOP||b>0&&this._onEdge===D.BOTTOM?this._earlyEnd||(g.call(this,a),this._earlyEnd=!0):this._earlyEnd&&Math.abs(b)>Math.abs(this.getVelocity())&&e.call(this,a)),!this._earlyEnd){if(this._touchVelocity=b,a.slip){var d=this.options.speedLimit;-d>b?b=-d:b>d&&(b=d),this.setVelocity(b);var f=16*d;c>f?c=f:-f>c&&(c=-f)}this.setPosition(this.getPosition()+c),this._displacement+=c,this._springState===C.NONE&&o.call(this)}}function g(a){if(this._touchCount=a.count||0,!this._touchCount){j.call(this),this._onEdge!==D.NONE&&n.call(this,this._edgeSpringPosition,C.EDGE),i.call(this);var b=-a.velocity,c=this.options.speedLimit;a.slip&&(c*=this.options.edgeGrip),-c>b?b=-c:b>c&&(b=c),this.setVelocity(b),this._touchVelocity=0,this._needsPaginationCheck=!0}}function h(){this._eventInput.bindThis(this),this._eventInput.on("start",e),this._eventInput.on("update",f),this._eventInput.on("end",g),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(a){this._edgeSpringPosition=a.position,l.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(a){this._springState===C.NONE&&o.call(this),this._displacement=a.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==C.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function i(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function j(){this._springState=C.NONE,this._physicsEngine.detachAll()}function k(a){var b=this.options.direction,c=a.getSize();return c?c[b]:this._scroller.getSize()[b]}function l(a){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=a,this._touchCount||this._springState===C.EDGE||n.call(this,this._edgeSpringPosition,C.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(j.call(this),i.call(this))}function m(){if(!this._touchCount&&this._springState!==C.EDGE){var a=this.getVelocity();if(!(Math.abs(a)>=this.options.pageStopSpeed)){var b=this.getPosition(),c=Math.abs(a)>this.options.pageSwitchSpeed,d=k.call(this,this._node),e=b>.5*d,f=a>0,g=0>a;this._needsPaginationCheck=!1,e&&!c||c&&f?this.goToNextPage():c&&g?this.goToPreviousPage():n.call(this,0,C.PAGE)}}}function n(a,b){var c;b===C.EDGE?(this._edgeSpringPosition=a,c={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):b===C.PAGE&&(this._pageSpringPosition=a,c={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(c),b&&!this._springState&&(j.call(this),this._springState=b,i.call(this)),this._springState=b}function o(){var a=0,b=this.getPosition();b+=(0>b?-.5:.5)>>0;for(var c=k.call(this,this._node),d=this._node.getNext();a+b>=c&&d;)a-=c,this._scroller.sequenceFrom(d),this._node=d,d=this._node.getNext(),c=k.call(this,this._node);for(var e,f=this._node.getPrevious();0>=a+b&&f;)e=k.call(this,f),this._scroller.sequenceFrom(f),this._node=f,a+=e,f=this._node.getPrevious();a&&p.call(this,a),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*c&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*c&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function p(a){this._edgeSpringPosition+=a,this._pageSpringPosition+=a,this.setPosition(this.getPosition()+a),this._totalShift+=a,this._springState===C.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===C.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var q=a("../physics/PhysicsEngine"),r=a("../physics/bodies/Particle"),s=a("../physics/forces/Drag"),t=a("../physics/forces/Spring"),u=a("../core/EventHandler"),v=a("../core/OptionsManager"),w=a("../core/ViewSequence"),x=a("../views/Scroller"),y=a("../utilities/Utility"),z=a("../inputs/GenericSync"),A=a("../inputs/ScrollSync"),B=a("../inputs/TouchSync");z.register({scroll:A,touch:B});var C={NONE:0,EDGE:1,PAGE:2},D={TOP:-1,NONE:0,BOTTOM:1};d.DEFAULT_OPTIONS={direction:y.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},d.prototype.getCurrentIndex=function(){return this._node.index},d.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===D.TOP)return null;if(this.getPosition()>1&&this._springState===C.NONE)return n.call(this,0,C.PAGE),this._node;var a=this._node.getPrevious();if(a){var b=k.call(this,a);this._scroller.sequenceFrom(a),this._node=a,p.call(this,b),n.call(this,0,C.PAGE)}return a},d.prototype.goToNextPage=function(){if(!this._node||this._onEdge===D.BOTTOM)return null;var a=this._node.getNext();if(a){var b=k.call(this,this._node);this._scroller.sequenceFrom(a),this._node=a,p.call(this,-b),n.call(this,0,C.PAGE)}return a},d.prototype.goToPage=function(a){var b,c=this.getCurrentIndex();if(c>a)for(b=0;c-a>b;b++)this.goToPreviousPage();if(a>c)for(b=0;a-c>b;b++)this.goToNextPage()},d.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},d.prototype.getPosition=function(){return this._particle.getPosition1D()},d.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},d.prototype.getOffset=d.prototype.getPosition,d.prototype.setPosition=function(a){this._particle.setPosition1D(a)},d.prototype.setOffset=d.prototype.setPosition,d.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},d.prototype.setVelocity=function(a){this._particle.setVelocity1D(a)},d.prototype.setOptions=function(a){void 0!==a.direction&&("x"===a.direction?a.direction=y.Direction.X:"y"===a.direction&&(a.direction=y.Direction.Y)),a.groupScroll!==this.options.groupScroll&&(a.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(a),this._scroller.setOptions(a),void 0!==a.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==a.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==a.edgePeriod||void 0!==a.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(a.rails||void 0!==a.direction||void 0!==a.syncScale||a.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===y.Direction.X?z.DIRECTION_X:z.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},d.prototype.sequenceFrom=function(a){return a instanceof Array&&(a=new w({array:a,trackSize:!0})),this._node=a,this._scroller.sequenceFrom(a)},d.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},d.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&m.call(this),this._scroller.render()},c.exports=d}),define("main",["require","famous/core/Engine","famous/views/ScrollView"],function(a,b,c){var d=(a("famous/core/Transform"),a("famous/core/Surface")),e=b.createContext(),f=new c,g=[];f.sequenceFrom(g);var h=500,i=new d({size:[void 0,h],content:"Surface1",properties:{backgroundColor:"red"}});i.pipe(f);var j=new d({size:[void 0,h],content:"Surface 1",properties:{backgroundColor:"green"}});j.pipe(f);var k=new d({size:[void 0,h],content:"Surface 1",properties:{backgroundColor:"yellow"}});k.pipe(f);var l=new d({size:[void 0,h],content:"Surface 4",properties:{backgroundColor:"orange"}});l.pipe(f),g.push(i),g.push(j),g.push(k),g.push(l),e.add(f).add(g)}),define("main",function(){}),define(["require","famous/core/Engine","famous/views/ScrollView"],function(a,b,c){var d=(a("famous/core/Transform"),a("famous/core/Surface")),e=b.createContext(),f=new c,g=[];f.sequenceFrom(g);var h=500,i=new d({size:[void 0,h],content:"Surface1",properties:{backgroundColor:"red"}});i.pipe(f);var j=new d({size:[void 0,h],content:"Surface 1",properties:{backgroundColor:"green"}});j.pipe(f);var k=new d({size:[void 0,h],content:"Surface 1",properties:{backgroundColor:"yellow"}});k.pipe(f);var l=new d({size:[void 0,h],content:"Surface 4",properties:{backgroundColor:"orange"}});l.pipe(f),g.push(i),g.push(j),g.push(k),g.push(l),e.add(f).add(g)});